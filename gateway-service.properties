# ===== GATEWAY-SERVICE CONFIGURATION =====
spring.application.name=gateway-service

# ===== SERVER =====
server.port=8080

# ===== EUREKA CLIENT =====
eureka.instance.prefer-ip-address=true

# ===== SPRING CLOUD GATEWAY =====
# DÃ©sactivation du discovery locator pour utiliser des routes explicites
spring.cloud.gateway.discovery.locator.enabled=false

# ----- Product Service Route -----
spring.cloud.gateway.routes[0].id=product-service
spring.cloud.gateway.routes[0].uri=lb://PRODUCT-SERVICE
spring.cloud.gateway.routes[0].predicates[0]=Path=/products/**
spring.cloud.gateway.routes[0].filters[0]=RewritePath=/products(?<segment>/.*)?, /api/products${segment}

# ----- Order Service Route -----
spring.cloud.gateway.routes[1].id=order-service
spring.cloud.gateway.routes[1].uri=lb://ORDER-SERVICE
spring.cloud.gateway.routes[1].predicates[0]=Path=/orders/**
spring.cloud.gateway.routes[1].filters[0]=RewritePath=/orders(?<segment>/.*)?, /api/orders${segment}

# ===== ACTUATOR =====
management.endpoints.web.exposure.include=health,info,gateway
management.endpoint.gateway.enabled=true

# ===== LOGGING =====
logging.level.org.springframework.cloud.gateway=DEBUG
logging.level.com.netflix.discovery=DEBUG

